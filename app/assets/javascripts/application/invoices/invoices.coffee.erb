ready = ->
  if current_scope "controller", "invoices"
    default_datepicker()
    type_ahead_clients()
    init()

init = ->
  update_status()
  $('#invoice_status').change update_status
  invoice_us()
  show_icons()

invoice_us = ->
  type = $('.country')[0]["id"]
  show(type)
  hide(type)

show_icons = ->
  $('.search_typeahead').bind 'typeahead:selected', (obj, datum, name) ->
    $("#contacts-fields").removeClass("hide")

update_status = ->
  value = default_format $('#invoice_status option:selected').text()
  action = $('#form_invoice').data("action")
  switch action 
    when "edit", "update"
      show(value)
      disable(value)
      hide(value)

$(document).ready(ready)
$(document).on('page:load', ready)
